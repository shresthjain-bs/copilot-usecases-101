{% extends "base.html" %}

{% block title %}Batch Processing{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header text-center">
                <h3><i class="fas fa-upload"></i> Batch Box Processing</h3>
                <p class="mb-0">Upload a CSV file to process multiple boxes using the original process_boxes.py logic</p>
            </div>
            <div class="card-body">
                <form method="POST" action="{{ url_for('batch_upload') }}" enctype="multipart/form-data">
                    <div class="mb-4">
                        <label for="csv_file" class="form-label">Upload CSV File</label>
                        <input type="file" class="form-control" id="csv_file" name="csv_file" 
                               accept=".csv" required>
                        <small class="form-text text-muted">
                            CSV should have columns: image_id, image_url, height, weight, breadth
                        </small>
                    </div>

                    <div class="text-center">
                        <button type="submit" class="btn btn-primary btn-lg">
                            <i class="fas fa-cogs"></i> Process Batch
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- CSV Format Help -->
        <div class="card mt-4">
            <div class="card-header">
                <h5><i class="fas fa-info-circle"></i> CSV Format Requirements</h5>
            </div>
            <div class="card-body">
                <p>Your CSV file should have the same format as the original <code>testbed.csv</code>:</p>
                <table class="table table-sm">
                    <thead>
                        <tr>
                            <th>Column Name</th>
                            <th>Description</th>
                            <th>Example</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>image_id</code></td>
                            <td>Unique identifier for the box</td>
                            <td>1, 2, 3...</td>
                        </tr>
                        <tr>
                            <td><code>image_url</code></td>
                            <td>URL to the box image</td>
                            <td>https://example.com/box1.jpg</td>
                        </tr>
                        <tr>
                            <td><code>height</code></td>
                            <td>Height of the box (numeric)</td>
                            <td>600</td>
                        </tr>
                        <tr>
                            <td><code>weight</code></td>
                            <td>Length of the box (numeric)</td>
                            <td>400</td>
                        </tr>
                        <tr>
                            <td><code>breadth</code></td>
                            <td>Width of the box (numeric)</td>
                            <td>300</td>
                        </tr>
                    </tbody>
                </table>

                <h6 class="mt-3">Example CSV Content (same as testbed.csv):</h6>
                <pre class="bg-light p-3 rounded"><code>image_id,image_url,height,weight,breadth
1,https://raw.githubusercontent.com/shresthjain-bs/public/main/copilot_demo/box1.jpeg,600,400,300
2,https://raw.githubusercontent.com/shresthjain-bs/public/main/copilot_demo/box2.png,800,600,400
3,https://raw.githubusercontent.com/shresthjain-bs/public/main/copilot_demo/box3.jpeg,1024,768,512</code></pre>
            </div>
        </div>

        <!-- Processing Method -->
        <div class="card mt-4">
            <div class="card-header">
                <h5><i class="fas fa-cogs"></i> Processing Method</h5>
            </div>
            <div class="card-body">
                <div class="alert alert-info">
                    <strong><i class="fas fa-info-circle"></i> Note:</strong><br>
                    This batch processing uses the exact same <code>process_images()</code> function from 
                    <code>process_boxes.py</code> that the original script uses. This ensures identical 
                    behavior and results.
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="card mt-4">
            <div class="card-body text-center">
                <a href="{{ url_for('index') }}" class="btn btn-outline-primary">
                    <i class="fas fa-arrow-left"></i> Back to Single Processing
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
